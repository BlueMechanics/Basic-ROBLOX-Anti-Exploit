local DataStoreService = game:GetService("DataStoreService")
local banDataStore = DataStoreService:GetDataStore("banDataStore")

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local addEvent = Instance.new("RemoteEvent")
addEvent.Name = "Banned"
addEvent.Parent = ReplicatedStorage
local banned = ReplicatedStorage:WaitForChild("Banned")

banned.OnServerEvent:Connect(function(player)
	local success, errormessage = pcall(function()
		local playerUserId = player.UserId
		banDataStore:SetAsync(playerUserId, true)
	end)

	if success then
		print(player.Name .. " was banned for exploiting")
	end
	player:Kick("You have been banned for exploiting!")
end)

game.Players.PlayerAdded:Connect(function(player)
	local playerUserId = player.UserId
	
	local banned
	local success, errormessage = pcall(function()
		banned = banDataStore:GetAsync(playerUserId)
	end)
	
	if banned == true then
		player:Kick("You have been banned for exploiting!")
	end
end)

game.StarterPlayer.StarterPlayerScripts:GetPropertyChangedSignal()
